<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Office Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            flex-wrap: wrap;
        }

        .nav-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            font-size: 1em;
            font-weight: 600;
            min-width: 150px;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            transform: translateY(-2px);
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .nav-tab.active:hover {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
        }

        .tab-content {
            padding: 30px;
            min-height: 600px;
        }

        .tab-pane {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-pane.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Birthday Calculator Styles */
        .birthday-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .birthday-today {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            animation: pulse 1.5s infinite;
            border: 3px solid #ffd700;
        }

        .birthday-upcoming {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
        }

        .birthday-far {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #dee2e6;
        }

        @keyframes pulse {
            0% { box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4); }
            50% { box-shadow: 0 5px 30px rgba(255, 107, 107, 0.6); }
            100% { box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4); }
        }

        .happy-birthday-message {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            animation: celebration 3s infinite;
        }

        @keyframes celebration {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Employee Directory Styles */
        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .employee-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .employee-card:hover {
            transform: translateY(-5px);
        }

        .employee-info {
            text-align: center;
            margin-bottom: 15px;
        }

        .employee-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 2em;
            color: white;
        }

        .file-upload {
            margin: 10px 0;
        }

        .upload-btn {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        /* Announcements Styles */
        .announcement-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
        }

        .form-control:focus {
            outline: none;
            border-color: #74b9ff;
            box-shadow: 0 0 5px rgba(116, 185, 255, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.4);
        }

        .announcement-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #74b9ff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Wish Board Styles */
        .wish-form {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .emoji-picker {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .emoji-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-btn:hover, .emoji-btn.selected {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        .wish-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .wish-author {
            font-weight: 600;
            color: #74b9ff;
            margin-bottom: 5px;
        }

        /* Fun Activities Styles */
        .activity-grid {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-top: 20px;
        }

        .leaderboard {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 20px;
            border-radius: 15px;
        }

        .leaderboard h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #2d3436;
        }

        .leader-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .leader-rank {
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 15px;
            width: 30px;
        }

        .leader-rank.gold { color: #f39c12; }
        .leader-rank.silver { color: #95a5a6; }
        .leader-rank.bronze { color: #e67e22; }

        .activity-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .activity-btn {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .activity-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
        }

        .hidden { display: none; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .activity-grid {
                grid-template-columns: 1fr;
            }
            
            .employee-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                margin: 10px;
                border-radius: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏢 Office Management System</h1>
            <p>අපේ කාර්යාලයේ සම්පූර්ණ කළමණාකරණ පද්ධතිය</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('birthday')">🎂 උපන්දින</button>
            <button class="nav-tab" onclick="showTab('directory')">👥 කාර්යමණ්ඩලය</button>
            <button class="nav-tab" onclick="showTab('announcements')">📢 දැන්වීම්</button>
            <button class="nav-tab" onclick="showTab('wishes')">💝 සුභපැතුම්</button>
            <button class="nav-tab" onclick="showTab('activities')">🎮 විනෝදාස්වාදය</button>
        </div>

        <div class="tab-content">
            <!-- Birthday Calculator Tab -->
            <div id="birthday" class="tab-pane active">
                <div id="currentDate" style="background: #f8f9fa; padding: 15px; text-align: center; border-radius: 10px; margin-bottom: 20px; font-weight: bold;"></div>
                
                <div class="happy-birthday-message hidden" id="birthdayMessage">
                    🎉 අද උපන්දිනය සමරන්නේ: <span id="birthdayPerson"></span> 🎂
                    <br>සුභ උපන්දිනයක් වේවා! 🎈🎊
                </div>

                <h3>🎈 ඉදිරියේදී ඇති උපන්දින</h3>
                <div id="upcomingBirthdays"></div>
            </div>

            <!-- Employee Directory Tab -->
            <div id="directory" class="tab-pane">
                <h3>👥 කාර්යාල නිලධාරීන්ගේ නිර්මාණ දත්ත කෝටාසය</h3>
                <div class="employee-grid" id="employeeGrid"></div>
            </div>

            <!-- Announcements Tab -->
            <div id="announcements" class="tab-pane">
                <h3>📢 දැන්වීම් කළමණාකරණය</h3>
                <div class="announcement-form">
                    <div class="form-group">
                        <label>දැන්වීමේ මාතෘකාව:</label>
                        <input type="text" class="form-control" id="announcementTitle" placeholder="මාතෘකාව ඇතුළත් කරන්න">
                    </div>
                    <div class="form-group">
                        <label>දැන්වීමේ අන්තර්ගතය:</label>
                        <textarea class="form-control" id="announcementContent" rows="4" placeholder="දැන්වීමේ විස්තර ඇතුළත් කරන්න"></textarea>
                    </div>
                    <button class="btn-primary" onclick="addAnnouncement()">දැන්වීම එක් කරන්න</button>
                </div>
                <div id="announcementsList"></div>
            </div>

            <!-- Wishes Tab -->
            <div id="wishes" class="tab-pane">
                <h3>💝 උපන්දින සුභපැතුම්</h3>
                
                <!-- Birthday Person Wish Section (Only shows when someone has birthday today) -->
                <div id="birthdayWishSection" class="hidden">
                    <div class="wish-form" style="background: linear-gradient(135deg, #ff6b6b, #ffa500);">
                        <h4 style="margin-bottom: 15px; text-align: center;">🎂 <span id="birthdayPersonName"></span> වෙත ඔබේ සුභපැතුම දැක්වීම</h4>
                        <div class="form-group">
                            <label>ඔබේ නම:</label>
                            <input type="text" class="form-control" id="birthdayWishName" placeholder="ඔබේ නම ඇතුළත් කරන්න" style="background: rgba(255,255,255,0.9); color: #333;">
                        </div>
                        <div class="form-group">
                            <label>උපන්දින සුභපැතුම:</label>
                            <textarea class="form-control" id="birthdayWishMessage" rows="3" placeholder="උපන්දින සුභපැතුම ඇතුළත් කරන්න" style="background: rgba(255,255,255,0.9); color: #333;"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Emoji තෝරන්න:</label>
                            <div class="emoji-picker">
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🎂')">🎂</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🎉')">🎉</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🎈')">🎈</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🎊')">🎊</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🎁')">🎁</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🌟')">🌟</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('❤️')">❤️</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🥳')">🥳</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('🌺')">🌺</button>
                                <button class="emoji-btn" onclick="selectBirthdayEmoji('💐')">💐</button>
                            </div>
                        </div>
                        <button class="btn-primary" onclick="addBirthdayWish()">උපන්දින සුභපැතුම එක් කරන්න 🎂</button>
                    </div>
                    
                    <!-- Birthday Wishes Display -->
                    <div id="birthdayWishesDisplay" style="margin-top: 20px;"></div>
                </div>

                <!-- General Wish Form -->
                <div class="wish-form">
                    <h4 style="margin-bottom: 15px; text-align: center;">සාමාන්‍ය සුභපැතුම්</h4>
                    <div class="form-group">
                        <label>ඔබේ නම:</label>
                        <input type="text" class="form-control" id="wishName" placeholder="ඔබේ නම ඇතුළත් කරන්න" style="background: rgba(255,255,255,0.9); color: #333;">
                    </div>
                    <div class="form-group">
                        <label>සුභපැතුම:</label>
                        <textarea class="form-control" id="wishMessage" rows="3" placeholder="ඔබේ සුභපැතුම ඇතුළත් කරන්න" style="background: rgba(255,255,255,0.9); color: #333;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Emoji තෝරන්න:</label>
                        <div class="emoji-picker">
                            <button class="emoji-btn" onclick="selectEmoji('🎂')">🎂</button>
                            <button class="emoji-btn" onclick="selectEmoji('🎉')">🎉</button>
                            <button class="emoji-btn" onclick="selectEmoji('🎈')">🎈</button>
                            <button class="emoji-btn" onclick="selectEmoji('🎊')">🎊</button>
                            <button class="emoji-btn" onclick="selectEmoji('🎁')">🎁</button>
                            <button class="emoji-btn" onclick="selectEmoji('🌟')">🌟</button>
                            <button class="emoji-btn" onclick="selectEmoji('❤️')">❤️</button>
                            <button class="emoji-btn" onclick="selectEmoji('🥳')">🥳</button>
                            <button class="emoji-btn" onclick="selectEmoji('🌺')">🌺</button>
                            <button class="emoji-btn" onclick="selectEmoji('🎯')">🎯</button>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="addWish()">සුභපැතුම එක් කරන්න</button>
                </div>
                <div id="wishesList"></div>
            </div>

            <!-- Fun Activities Tab -->
            <div id="activities" class="tab-pane">
                <h3>🎮 විනෝදාස්වාද ක්‍රියාකාරකම්</h3>
                <div class="activity-grid">
                    <div>
                        <div class="activity-buttons">
                            <button class="activity-btn" onclick="participateActivity('quiz')">🧠 දැනුම් තරගය</button>
                            <button class="activity-btn" onclick="participateActivity('photo')">📸 ඡායාරූප තරගය</button>
                            <button class="activity-btn" onclick="participateActivity('talent')">🎭 දක්ෂතා ප්‍රදර්ශනය</button>
                            <button class="activity-btn" onclick="participateActivity('team')">👥 කණ්ඩායම් ක්‍රීඩාව</button>
                            <button class="activity-btn" onclick="participateActivity('creative')">🎨 නිර්මාණශීලී තරගය</button>
                            <button class="activity-btn" onclick="participateActivity('sports')">⚽ ක්‍රීඩා තරගය</button>
                        </div>
                    </div>
                    <div class="leaderboard">
                        <h3>🏆 මාසික ශ්‍රේණිගත කිරීම</h3>
                        <div id="leaderboardList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample Data
        const staffData = [
            { name: "සුනිල් පෙරේරා", birthday: "1985-08-28", position: "කළමණාකරු" }, // අද birthday
            { name: "කමලා සිල්වා", birthday: "1990-07-22", position: "ගණකාධිකාරී" },
            { name: "රාජන් ෆර්නාන්දු", birthday: "1988-12-03", position: "IT විශේෂඥ" },
            { name: "නිමාලි විජේසේකර", birthday: "1992-09-18", position: "HR නිලධාරී" },
            { name: "ප්‍රසන්න රත්නායක", birthday: "1987-05-10", position: "අලෙවිකරණ නිලධාරී" },
            { name: "සයුරි විජේවර්ධන", birthday: "1991-01-28", position: "ලේකම්" },
            { name: "දිනේෂ් ගුණතිලක", birthday: "1989-11-12", position: "ඉංජිනේරු" },
            { name: "මධුරි අබේසේකර", birthday: "1993-04-07", position: "මූල්‍ය විශ්ලේෂක" },
            { name: "චන්ද්‍ර හේරත්", birthday: "1986-08-25", position: "ප්‍රකල්ප කළමණාකරු" },
            { name: "අනෝමා ජයසිංහ", birthday: "1994-06-14", position: "සන්නිවේදන නිලධාරී" }
        ];

        let announcements = [];
        let wishes = [];
        let birthdayWishes = []; // නව array උපන්දින සුභපැතුම් සඳහා
        let selectedEmoji = '🎂';
        let selectedBirthdayEmoji = '🎂'; // නව variable
        let activityScores = {
            'සුනිල් පෙරේරා': 120,
            'කමලා සිල්වා': 98,
            'රාජන් ෆර්නාන්දු': 87,
            'නිමාලි විජේසේකර': 76,
            'ප්‍රසන්න රත්නායක': 65
        };

        // Tab Management
        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-pane');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Load specific content
            if (tabName === 'birthday') loadBirthdays();
            if (tabName === 'directory') loadEmployeeDirectory();
            if (tabName === 'announcements') loadAnnouncements();
            if (tabName === 'wishes') {
                loadWishes();
                loadBirthdays(); // birthday wish section update කරන්න
            }
            if (tabName === 'activities') loadLeaderboard();
        }

        // Birthday Functions
        function calculateDaysUntilBirthday(birthday) {
            const today = new Date();
            const currentYear = today.getFullYear();
            
            let birthdayThisYear = new Date(currentYear, 
                parseInt(birthday.split('-')[1]) - 1, 
                parseInt(birthday.split('-')[2])
            );
            
            if (birthdayThisYear < today) {
                birthdayThisYear = new Date(currentYear + 1, 
                    parseInt(birthday.split('-')[1]) - 1, 
                    parseInt(birthday.split('-')[2])
                );
            }
            
            const diffTime = birthdayThisYear - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        function loadBirthdays() {
            const today = new Date();
            document.getElementById('currentDate').textContent = 
                `අද දිනය: ${today.toLocaleDateString('si-LK', { 
                    year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' 
                })}`;

            const upcomingContainer = document.getElementById('upcomingBirthdays');
            const birthdayMessage = document.getElementById('birthdayMessage');
            const birthdayPerson = document.getElementById('birthdayPerson');
            const birthdayWishSection = document.getElementById('birthdayWishSection');
            const birthdayPersonName = document.getElementById('birthdayPersonName');
            
            let todayBirthdays = [];
            
            const processedData = staffData.map(person => {
                const daysUntil = calculateDaysUntilBirthday(person.birthday);
                if (daysUntil === 0) todayBirthdays.push(person.name);
                return { ...person, daysUntil };
            });

            // Show birthday message
            if (todayBirthdays.length > 0) {
                birthdayPerson.textContent = todayBirthdays.join(', ');
                birthdayMessage.classList.remove('hidden');
                
                // Show birthday wish section
                birthdayWishSection.classList.remove('hidden');
                birthdayPersonName.textContent = todayBirthdays[0]; // පළමු person එක show කරන්න
                loadBirthdayWishes(); // birthday wishes load කරන්න
            } else {
                birthdayMessage.classList.add('hidden');
                birthdayWishSection.classList.add('hidden');
            }

            // සියලුම upcoming birthdays show කරන්න (මාස 3ක් නොවෙයි)
            const upcomingBirthdays = processedData
                .sort((a, b) => a.daysUntil - b.daysUntil);

            upcomingContainer.innerHTML = upcomingBirthdays.map(person => {
                let cssClass = 'birthday-far';
                let daysText = `දින ${person.daysUntil}`;
                
                if (person.daysUntil === 0) {
                    cssClass = 'birthday-today';
                    daysText = 'අද! 🎉';
                } else if (person.daysUntil <= 7) {
                    cssClass = 'birthday-upcoming';
                    daysText = person.daysUntil === 1 ? 'හෙට' : `දින ${person.daysUntil}`;
                }

                return `
                    <div class="birthday-item ${cssClass}">
                        <div>
                            <div style="font-weight: 600; font-size: 1.1em;">${person.name}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">${new Date(person.birthday).toLocaleDateString('si-LK', { month: 'long', day: 'numeric' })}</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-weight: bold;">${daysText}</div>
                    </div>
                `;
            }).join('');
        }

        // Employee Directory Functions
        function loadEmployeeDirectory() {
            const grid = document.getElementById('employeeGrid');
            grid.innerHTML = staffData.map(employee => `
                <div class="employee-card">
                    <div class="employee-info">
                        <div class="employee-avatar">${employee.name.charAt(0)}</div>
                        <h4>${employee.name}</h4>
                        <p>${employee.position}</p>
                        <p>උපන්දිනය: ${new Date(employee.birthday).toLocaleDateString('si-LK')}</p>
                    </div>
                    <div class="file-upload">
                        <input type="file" id="file-${employee.name.replace(/\s+/g, '')}" accept=".pdf,.doc,.docx,.jpg,.png,.gif" style="display: none;" onchange="uploadFile('${employee.name}', this)">
                        <button class="upload-btn" onclick="document.getElementById('file-${employee.name.replace(/\s+/g, '')}').click()">📁 ගොනුව අප්ලෝඩ්</button>
                        <div id="upload-status-${employee.name.replace(/\s+/g, '')}" style="margin-top: 10px; font-size: 0.9em;"></div>
                    </div>
                </div>
            `).join('');
        }

        function uploadFile(employeeName, input) {
            const file = input.files[0];
            if (file) {
                const statusDiv = document.getElementById(`upload-status-${employeeName.replace(/\s+/g, '')}`);
                statusDiv.innerHTML = `<span style="color: green;">✅ ${file.name} සාර්ථකව අප්ලෝඩ් විය!</span>`;
                
                // Here you would typically send the file to a server
                console.log(`File uploaded for ${employeeName}:`, file.name);
            }
        }

        // Announcements Functions
        function addAnnouncement() {
            const title = document.getElementById('announcementTitle').value;
            const content = document.getElementById('announcementContent').value;
            
            if (title && content) {
                const announcement = {
                    id: Date.now(),
                    title,
                    content,
                    date: new Date().toLocaleDateString('si-LK'),
                    time: new Date().toLocaleTimeString('si-LK')
                };
                
                announcements.unshift(announcement);
                document.getElementById('announcementTitle').value = '';
                document.getElementById('announcementContent').value = '';
                loadAnnouncements();
            } else {
                alert('කරුණාකර සියලුම ක්ෂේත්‍ර පුරවන්න!');
            }
        }

        function loadAnnouncements() {
            const list = document.getElementById('announcementsList');
            list.innerHTML = announcements.map(announcement => `
                <div class="announcement-item">
                    <h4>${announcement.title}</h4>
                    <p>${announcement.content}</p>
                    <small style="color: #6c757d;">📅 ${announcement.date} - ⏰ ${announcement.time}</small>
                </div>
            `).join('');
        }

        // Wishes Functions
        function selectEmoji(emoji) {
            selectedEmoji = emoji;
            // General emoji buttons එකට selected class add කරන්න
            document.querySelectorAll('#wishes .emoji-picker .emoji-btn').forEach(btn => {
                if (btn.textContent === emoji && btn.onclick.toString().includes('selectEmoji')) {
                    btn.classList.add('selected');
                } else if (btn.onclick.toString().includes('selectEmoji')) {
                    btn.classList.remove('selected');
                }
            });
        }

        function selectBirthdayEmoji(emoji) {
            selectedBirthdayEmoji = emoji;
            // Birthday emoji buttons එකට selected class add කරන්න
            document.querySelectorAll('#birthdayWishSection .emoji-picker .emoji-btn').forEach(btn => {
                if (btn.textContent === emoji) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });
        }

        function addBirthdayWish() {
            const name = document.getElementById('birthdayWishName').value;
            const message = document.getElementById('birthdayWishMessage').value;
            const birthdayPerson = document.getElementById('birthdayPersonName').textContent;
            
            if (name && message) {
                const wish = {
                    id: Date.now(),
                    name,
                    message,
                    emoji: selectedBirthdayEmoji,
                    birthdayPerson,
                    date: new Date().toLocaleDateString('si-LK'),
                    time: new Date().toLocaleTimeString('si-LK')
                };
                
                birthdayWishes.unshift(wish);
                document.getElementById('birthdayWishName').value = '';
                document.getElementById('birthdayWishMessage').value = '';
                loadBirthdayWishes();
                
                // Success message
                alert(`🎉 ${birthdayPerson} වෙත ඔබේ සුභපැතුම සාර්ථකව එක් කරන ලදී!`);
            } else {
                alert('කරුණාකර නම සහ සුභපැතුම ඇතුළත් කරන්න!');
            }
        }

        function loadBirthdayWishes() {
            const birthdayPersonName = document.getElementById('birthdayPersonName').textContent;
            const display = document.getElementById('birthdayWishesDisplay');
            
            // අද උපන්දිනය ඇති person වෙත wishes filter කරන්න
            const todayWishes = birthdayWishes.filter(wish => wish.birthdayPerson === birthdayPersonName);
            
            if (todayWishes.length > 0) {
                display.innerHTML = `
                    <h4 style="margin-bottom: 15px; color: #ff6b6b;">🎂 ${birthdayPersonName} වෙත ලැබුණු සුභපැතුම්:</h4>
                    ${todayWishes.map(wish => `
                        <div class="wish-item" style="background: linear-gradient(135deg, #fff5f5, #ffe8e8); border-left: 4px solid #ff6b6b;">
                            <div class="wish-author">${wish.emoji} ${wish.name}</div>
                            <div style="font-style: italic; color: #2d3436;">"${wish.message}"</div>
                            <small style="color: #636e72;">📅 ${wish.date} - ⏰ ${wish.time}</small>
                        </div>
                    `).join('')}
                `;
            } else {
                display.innerHTML = `
                    <div style="text-align: center; padding: 20px; background: rgba(255,255,255,0.3); border-radius: 10px; color: white;">
                        <p>🎂 ${birthdayPersonName} වෙත තවම සුභපැතුම් ලැබී නැත</p>
                        <p>ඔබ පළමුවෙන් සුභපැතුම් දකින්න! 🎉</p>
                    </div>
                `;
            }
        }

        function addWish() {
            const name = document.getElementById('wishName').value;
            const message = document.getElementById('wishMessage').value;
            
            if (name && message) {
                const wish = {
                    id: Date.now(),
                    name,
                    message,
                    emoji: selectedEmoji,
                    date: new Date().toLocaleDateString('si-LK'),
                    time: new Date().toLocaleTimeString('si-LK')
                };
                
                wishes.unshift(wish);
                document.getElementById('wishName').value = '';
                document.getElementById('wishMessage').value = '';
                loadWishes();
            } else {
                alert('කරුණාකර නම සහ සුභපැතුම ඇතුළත් කරන්න!');
            }
        }

        function loadWishes() {
            const list = document.getElementById('wishesList');
            list.innerHTML = wishes.map(wish => `
                <div class="wish-item">
                    <div class="wish-author">${wish.emoji} ${wish.name}</div>
                    <div>${wish.message}</div>
                    <small style="color: #6c757d;">📅 ${wish.date} - ⏰ ${wish.time}</small>
                </div>
            `).join('');
        }

        // Fun Activities Functions
        function participateActivity(activityType) {
            const activities = {
                quiz: 'දැනුම් තරගය',
                photo: 'ඡායාරූප තරගය',
                talent: 'දක්ෂතා ප්‍රදර්ශනය',
                team: 'කණ්ඩායම් ක්‍රීඩාව',
                creative: 'නිර්මාණශීලී තරගය',
                sports: 'ක්‍රීඩා තරගය'
            };

            const points = Math.floor(Math.random() * 20) + 5; // 5-24 points
            const randomStaff = staffData[Math.floor(Math.random() * staffData.length)].name;
            
            if (activityScores[randomStaff]) {
                activityScores[randomStaff] += points;
            } else {
                activityScores[randomStaff] = points;
            }
            
            alert(`🎉 ${activities[activityType]} සඳහා සහභාගී වීම සාර්ථකයි!\n${randomStaff} අතට ${points} ලකුණු ලැබුණා!`);
            loadLeaderboard();
        }

        function loadLeaderboard() {
            const list = document.getElementById('leaderboardList');
            const sortedScores = Object.entries(activityScores)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);

            list.innerHTML = sortedScores.map((entry, index) => {
                const [name, score] = entry;
                let rankClass = '';
                let trophy = '';
                
                if (index === 0) {
                    rankClass = 'gold';
                    trophy = '🥇';
                } else if (index === 1) {
                    rankClass = 'silver';
                    trophy = '🥈';
                } else if (index === 2) {
                    rankClass = 'bronze';
                    trophy = '🥉';
                } else {
                    trophy = `#${index + 1}`;
                }

                return `
                    <div class="leader-item">
                        <div class="leader-rank ${rankClass}">${trophy}</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600;">${name}</div>
                            <div style="font-size: 0.9em; color: #636e72;">${score} ලකුණු</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialize the app
        function init() {
            loadBirthdays();
            loadEmployeeDirectory();
            loadAnnouncements();
            loadWishes();
            loadLeaderboard();
            
            // Auto-refresh birthdays every hour
            setInterval(loadBirthdays, 3600000);
        }

        // Run when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
